<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://jbritain.net/stylesheet.css">
    <title>Acid Interstate Torchmap Generator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  </head>

  <body onload="init()">
    <script src="./main.js"></script>

    <audio id="audioPlayer">
      <source src="#" id="audioSource" />
    </audio>

    <label for="audioUpload">Select an audio file</label>
    <br>
    <input onchange="updateAudioSource()" id="audioUpload" type="file" accept="audio/*" />

    <hr>

    <label for="speedSlider" id="speedLabel">Playback speed: 1.0x</label>
    <input style="width: unset" type="range" min="20" max="100" value="100" id="speedSlider" step="10" onchange="updateSpeed()">
    
    <br><br>

    <label for="startOffsetSelector">Start offset (s)</label>
    <input onchange="updateAudioPosition()" min="0" step="0.01" value="0" style="width: unset" id="startOffsetSelector" type="number" />

    <br><br>

    <b>Level Key</b>
    <br>
    <ul style="list-style: none;">
      <li><span style="color: blue">⬤</span> Top</li>
      <li><span style="color: yellow">⬤</span> Centre</li>
      <li><span style="color: red">⬤</span> Ground</li>
    </ul>

    <p>Press the numpad keys to add beats. Numpad 7 will place on the top left, 8 on both sides on the top, and 9 on the top right, etc.<br>
    <small>Pressing 'Fix Gaps' will cause unexpected behaviour if you attempt to undo any beats placed before this point.</small></p>
    <button onclick="playPause()" id="playPause">⏵</button>
    <button onclick="undo()">⎌</button>
    <button onclick="beats = []">Clear</button>
    <button onclick="exportFile()">Export</button>
    <button onclick="importJson()">Import</button>
    <button onclick="fixGaps()">Fix Gaps</button>
    <hr>
    <canvas style="width: 100%; aspect-ratio: 4/1; border: 1px solid var(--primary);" id="canvas">

    </canvas>
  </body>
</html>