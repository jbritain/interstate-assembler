<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://jbritain.net/stylesheet.css">
    <title>Acid Interstate Torchmap Generator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  </head>

  <body onload="init()">
    <script src="./main.js"></script>

    <audio id="audioPlayer">
      <source src="#" id="audioSource" />
    </audio>

    <label for="audioUpload">Select an audio file</label>
    <br>
    <input onchange="updateAudioSource()" id="audioUpload" type="file" accept="audio/*" />

    <hr>

    <label for="speedSlider" id="speedLabel">Playback speed: 1.0x</label>
    <input style="width: unset" type="range" min="20" max="100" value="100" id="speedSlider" step="10" onchange="updateSpeed()">
    
    <br><br>

    <label for="startOffsetSelector">Start offset (s)</label>
    <input onchange="updateAudioPosition()" min="0" step="0.01" value="0" style="width: unset" id="startOffsetSelector" type="number" />

    <br><br>

    <b>Level</b>
    <br>

    <input style="width: unset" id="levelGround" type="radio" name="level" value="1">
    <label for="levelGround"><span style="color: red">⬤</span> Ground</label>
    <br>

    <input checked style="width: unset" id="levelCentre" type="radio" name="level" value="2">
    <label for="levelCentre"><span style="color: yellow">⬤</span> Centre</label>
    <br>

    <input style="width: unset" id="levelTop" type="radio" name="level" value="3">
    <label for="levelTop"><span style="color: blue">⬤</span> Top</label>

    <p>Press the left and right arrow keys to add beats on the corresponding side. Press the up arrow to add on both sides.<br><small>Pressing 'Fix Gaps' will cause the undo button to remove the last beat instead, as it sorts the beats by X position.</small></p>
    <button onclick="playPause()" id="playPause">⏵</button>
    <button onclick="undo()">⎌</button>
    <button onclick="beats = []">Clear</button>
    <button onclick="exportFile()">Export</button>
    <button onclick="importJson()">Import</button>
    <button onclick="fixGaps()">Fix Gaps</button>
    <hr>
    <canvas style="width: 100%; aspect-ratio: 4/1; border: 1px solid var(--primary);" id="canvas">

    </canvas>
  </body>
</html>